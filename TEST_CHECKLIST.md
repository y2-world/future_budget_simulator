# 予算シミュレーターアプリ - テストチェックリスト

## 1. 設定機能（Configuration）

### 1.1 設定の作成
- [ ] 初回アクセス時に「設定がありません」の警告が表示される
- [ ] 「設定を作成」ボタンから設定ページに遷移できる
- [ ] 現在残高を入力して保存できる
- [ ] 開始日を選択して保存できる
- [ ] デフォルト給与額を設定できる
- [ ] デフォルト食費を設定できる
- [ ] デフォルトView Cardを設定できる
- [ ] 目標貯金額を設定できる
- [ ] 保存後、トースト通知が表示される

### 1.2 設定の更新
- [ ] 既存の設定を編集できる
- [ ] 現在残高をAJAXで更新できる（ページ遷移なし）
- [ ] 更新後、トースト通知が表示される

### 1.3 バリデーション
- [ ] 必須項目を空で送信するとエラーメッセージが表示される
- [ ] 無効な日付を入力するとエラーメッセージが表示される
- [ ] 負の数値を入力するとエラーメッセージが表示される

---

## 2. 月次計画管理（Monthly Plan）

### 2.1 月次計画の作成
- [ ] 「月次計画管理」ページから新規作成できる
- [ ] 年月を選択できる
- [ ] 給与情報（総支給額、控除額、交通費）を入力できる
- [ ] ボーナス情報を入力できる（条件付き表示）
- [ ] 食費、家賃などの固定費を入力できる
- [ ] 各クレジットカード使用額を入力できる
- [ ] ローン借入・その他を入力できる
- [ ] 保存後、一覧ページに戻る
- [ ] 保存後、トースト通知が表示される

### 2.2 月次計画の編集
- [ ] 一覧から「編集」ボタンをクリックできる
- [ ] 既存データが正しくフォームに表示される
- [ ] データを変更して保存できる
- [ ] 保存後、一覧ページに戻る
- [ ] AJAXで編集できる（モーダルまたはインライン編集）

### 2.3 月次計画の削除
- [ ] 一覧から削除ボタンをクリックできる
- [ ] 削除確認が表示される
- [ ] 削除後、データが一覧から消える
- [ ] 削除後、トースト通知が表示される

### 2.4 条件付きフィールド表示
- [ ] 1月・7月を選択するとボーナス関連フィールドが表示される
- [ ] 6月・12月を選択するとLAKE返済額フィールドが表示される
- [ ] ボーナス月を選択するとView Cardボーナス払いフィールドが表示される
- [ ] 年月を変更すると条件付きフィールドの表示/非表示が切り替わる

### 2.5 空フィールドの処理
- [ ] オプション項目を空で送信しても500エラーが出ない
- [ ] 空のフィールドは自動的に0として保存される
- [ ] IntegrityErrorが発生しない

### 2.6 一覧表示
- [ ] 作成済みの月次計画が年月順に表示される
- [ ] 給与とボーナスが正しくフォーマットされて表示される（¥マーク、カンマ区切り）
- [ ] 年月が「YYYY年MM月」形式で表示される
- [ ] デスクトップではテーブル形式で表示される
- [ ] モバイルではカード形式で表示される

---

## 3. クレジットカード見積もり（Credit Estimates）

### 3.1 見積もりの作成
- [ ] 「クレカ見積もり」ページから新規作成できる
- [ ] 年月を選択できる
- [ ] カード種類を選択できる（5種類）
- [ ] 説明を入力できる
- [ ] 金額を入力できる
- [ ] 引き落とし日を選択できる
- [ ] 保存後、一覧に追加される
- [ ] 保存後、トースト通知が1つだけ表示される（複数表示されない）

### 3.2 見積もりの編集
- [ ] 一覧から編集アイコンをクリックできる
- [ ] AJAXで編集フォームが表示される
- [ ] データを変更して保存できる
- [ ] 保存後、一覧が更新される
- [ ] 保存後、トースト通知が表示される

### 3.3 見積もりの削除
- [ ] 一覧から削除アイコンをクリックできる
- [ ] 削除確認が表示される
- [ ] 削除後、データが一覧から消える
- [ ] 削除後、トースト通知が表示される
- [ ] NoReverseMatchエラーが出ない

### 3.4 一覧表示とフィルタリング
- [ ] カード種類ごとにセクション分けされて表示される
- [ ] 各セクション内で取引日順にソートされる
- [ ] 通常払いとボーナス払いが正しく表示される
- [ ] ボーナス払いには「ボーナス払い」バッジが表示される
- [ ] 引き落とし日が「YYYY/M/D」形式で表示される（01ではなく1）
- [ ] 金額が正しくフォーマットされて表示される
- [ ] 合計金額が各セクションに表示される

---

## 4. クレジットカード定期支払い（Credit Defaults）

### 4.1 定期支払いの作成
- [ ] 「クレカ定期支払い」ページから新規作成できる
- [ ] カード種類を選択できる
- [ ] 説明を入力できる
- [ ] 金額を入力できる（カンマ区切り対応）
- [ ] 保存後、一覧に追加される
- [ ] 保存後、トースト通知が表示される

### 4.2 定期支払いの削除
- [ ] 一覧から削除ボタンをクリックできる
- [ ] 削除確認が表示される
- [ ] 削除後、データが一覧から消える
- [ ] 削除後、トースト通知が表示される

### 4.3 一覧表示
- [ ] カード種類ごとにグループ化して表示される
- [ ] 説明と金額が正しく表示される
- [ ] デスクトップではテーブル形式で表示される
- [ ] モバイルではカード形式で表示される

---

## 5. シミュレーション機能（Simulation）

### 5.1 シミュレーション実行
- [ ] トップページから「シミュレーション実行」ボタンをクリックできる
- [ ] 月次計画が存在しない場合はボタンが表示されない
- [ ] シミュレーション結果ページに遷移する
- [ ] 将来の口座残高が月ごとに表示される
- [ ] グラフが表示される（ある場合）

### 5.2 計算精度
- [ ] 給与収入が正しく加算される
- [ ] ボーナス収入が正しく加算される
- [ ] 食費・家賃などの支出が正しく減算される
- [ ] クレジットカード支出が正しく減算される
- [ ] クレジットカード定期支払いが自動的に含まれる
- [ ] ローン借入が正しく処理される
- [ ] 残高がマイナスになる場合は警告が表示される

---

## 6. 過去の明細（Past Transactions）

### 6.1 過去の月次計画編集
- [ ] 「過去の明細」ページで年月を選択できる
- [ ] 選択した年月の既存データがフォームに表示される
- [ ] データを編集して保存できる
- [ ] 保存後、トースト通知が表示される
- [ ] 空フィールドを送信しても500エラーが出ない
- [ ] 空のフィールドは自動的に0として保存される

### 6.2 過去の給与情報作成
- [ ] 存在しない年月を選択した場合、新規作成フォームが表示される
- [ ] 給与情報を入力して保存できる
- [ ] 保存後、トースト通知が表示される
- [ ] 空フィールドを送信しても500エラーが出ない

### 6.3 過去のクレカ明細表示
- [ ] 選択した年月のクレカ明細が表示される
- [ ] カード種類ごとにセクション分けされる
- [ ] 通常払いとボーナス払いが区別される
- [ ] 引き落とし日順にソートされる
- [ ] 分割払いの場合は「分割払い (X/Y回)」が表示される
- [ ] ボーナス払いには「ボーナス払い」バッジが表示される

### 6.4 過去のクレカ明細編集
- [ ] 説明を編集できる
- [ ] 金額を編集できる
- [ ] 分割払いを通常払いに変更できる
- [ ] 通常払いを分割払いに変更できる
- [ ] 引き落とし日を変更できる
- [ ] AJAXで保存できる
- [ ] 保存後、一覧が更新される
- [ ] 保存後、トースト通知が表示される
- [ ] トースト通知が複数表示されない

---

## 7. UI/UX

### 7.1 レスポンシブデザイン
- [ ] デスクトップで正しく表示される
- [ ] タブレットで正しく表示される
- [ ] スマートフォンで正しく表示される
- [ ] テーブルがモバイルではカード形式になる

### 7.2 トースト通知
- [ ] 成功時に緑色のトーストが表示される
- [ ] エラー時に赤色のトーストが表示される
- [ ] 情報時に青色のトーストが表示される
- [ ] トーストが3秒後に自動的に消える
- [ ] 同じアクションで複数のトーストが表示されない

### 7.3 ナビゲーション
- [ ] トップページから各機能にアクセスできる
- [ ] 各ページからトップページに戻れる
- [ ] パンくずリストが表示される（ある場合）
- [ ] ボタンやリンクが分かりやすい

---

## 8. エラーハンドリング

### 8.1 フォームバリデーション
- [ ] 必須項目が空の場合、エラーメッセージが表示される
- [ ] 無効な値を入力した場合、エラーメッセージが表示される
- [ ] エラー時にフォームが空にならない（入力値が保持される）
- [ ] エラーメッセージが該当フィールドの下に表示される

### 8.2 エラーページ
- [ ] 存在しないページにアクセスすると404エラーが表示される
- [ ] サーバーエラー時に500エラーが表示される
- [ ] エラーページから復帰できる

### 8.3 データ整合性
- [ ] 重複する年月の月次計画を作成しようとするとエラーが表示される
- [ ] 無効な年月を選択するとエラーが表示される
- [ ] 範囲外の値を入力するとエラーが表示される

---

## 9. データ永続性

### 9.1 データベース操作
- [ ] 作成したデータがデータベースに保存される
- [ ] 編集したデータが正しく更新される
- [ ] 削除したデータがデータベースから削除される
- [ ] トランザクションが正しく処理される

### 9.2 セッション管理
- [ ] Djangoメッセージがセッションに保存される
- [ ] メッセージが表示後にセッションから削除される
- [ ] メッセージが意図しないページで表示されない

---

## 10. AJAX機能

### 10.1 AJAX リクエスト
- [ ] AJAXリクエストがJSONレスポンスを返す
- [ ] AJAX編集後にページ遷移しない
- [ ] AJAX削除後にページ遷移しない
- [ ] AJAXエラー時に適切なエラーメッセージが表示される

### 10.2 AJAX と 通常リクエストの切り替え
- [ ] AJAXリクエストではJSONが返される
- [ ] 通常のリクエストではHTMLが返される
- [ ] AJAXリクエストではDjangoメッセージが使われない
- [ ] 通常のリクエストではDjangoメッセージが使われる

---

## 11. エッジケース

### 11.1 空データ
- [ ] 月次計画が0件の場合に適切なメッセージが表示される
- [ ] クレカ見積もりが0件の場合に適切なメッセージが表示される
- [ ] クレカ定期支払いが0件の場合に適切なメッセージが表示される

### 11.2 大量データ
- [ ] 月次計画が多数ある場合も正しく表示される
- [ ] クレカ明細が多数ある場合も正しく表示される
- [ ] ページネーションが機能する（実装されている場合）

### 11.3 特殊文字
- [ ] 説明に特殊文字を入力できる
- [ ] HTMLタグを入力してもエスケープされる
- [ ] JavaScriptコードを入力しても実行されない（XSS対策）

---

## 12. パフォーマンス

### 12.1 ページ読み込み速度
- [ ] トップページが1秒以内に表示される
- [ ] 一覧ページが2秒以内に表示される
- [ ] AJAXレスポンスが1秒以内に返される

### 12.2 データベースクエリ
- [ ] N+1問題が発生していない
- [ ] 不要なクエリが実行されていない

---

## テスト実施記録

| 項目番号 | テスト日時 | 実施者 | 結果 | 備考 |
|---------|----------|--------|------|------|
|         |          |        |      |      |
|         |          |        |      |      |
|         |          |        |      |      |

---

## 優先度別テスト項目

### 🔴 高優先度（必須）
- 設定の作成・更新
- 月次計画の作成・編集・削除
- クレカ見積もりの作成・編集・削除
- シミュレーション実行
- フォームバリデーション
- 空フィールドの処理（IntegrityError対策）
- トースト通知の表示

### 🟡 中優先度（重要）
- 条件付きフィールド表示
- 過去の明細編集
- AJAX機能
- データ整合性チェック
- レスポンシブデザイン

### 🟢 低優先度（推奨）
- エッジケース
- パフォーマンステスト
- XSS対策
- 大量データ処理
